<!-- PageHome.vue -->
<template>
  <div class="home" @click="goToAbout"> <!-- 클릭 이벤트 추가 -->
    <div class="scene">
      <span class="light" style="--i: 1;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="light" style="--i: 2;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="light" style="--i: 3;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="light" style="--i: 4;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="light" style="--i: 5;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="test" style="--i: 6;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="light" style="--i: 7;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="light" style="--i: 8;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="light" style="--i: 9;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="light" style="--i: 10;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="light" style="--i: 11;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="light" style="--i: 12;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="light" style="--i: 13;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="light" style="--i: 14;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="light" style="--i: 15;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="light" style="--i: 16;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="light" style="--i: 17;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="light" style="--i: 18;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="light" style="--i: 19;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="light" style="--i: 20;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="light" style="--i: 21;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="light" style="--i: 22;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="light" style="--i: 23;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="light" style="--i: 24;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
      <span class="light" style="--i: 25;">
        <i style="--j: 1;"></i>
        <i style="--j: 2;"></i>
        <i style="--j: 3;"></i>
        <i style="--j: 4;"></i>
        <i style="--j: 5;"></i>
      </span>
    </div>
  </div>
</template>

<script>
import { useRouter } from 'vue-router';

export default {
  name: 'PageHome',
  setup() {
    const router = useRouter();
    
    const goToAbout = (event) => {
      if (event.button === 0) { // 마우스 왼쪽 버튼 클릭 확인
        router.push('/about');
      }
    };

    return {
      goToAbout
    };
  },
  methods: {
    getRandomIndices(count, max) {
      let indices = new Set();
      while (indices.size < count) {
        indices.add(Math.floor(Math.random() * max));
      }
      return Array.from(indices);
    },
    getRandomDelay(min, max) {
      return Math.random() * (max - min) + min;
    },
    animate() {
      const interval = 1200;
      let lastUpdate = 0;
      const numClasses = 1;
      const minDelay = 1000;
      const maxDelay = 2500;

      const step = (timestamp) => {
        if (timestamp - lastUpdate >= interval) {
          lastUpdate = timestamp;

          let elements = this.$el.querySelectorAll('.light');
          let indices = this.getRandomIndices(numClasses, elements.length);

          indices.forEach((index) => {
            if (index < elements.length) {
              elements[index].classList.add('active');

              setTimeout(() => {
                elements[index].classList.remove('active');
              }, this.getRandomDelay(minDelay, maxDelay));
            }
          });
        }

        requestAnimationFrame(step);
      };

      requestAnimationFrame(step);
    }
  },
  mounted() {
    this.animate();
  }
};
</script>

<style lang="scss">
@import '@/plugins/home'; // 챗봇 스타일 임포트
</style>